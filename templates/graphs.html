{% extends 'layout.html' %}

{% block body %}


<canvas id="lineChart1" width="400" height="300"></canvas>
<canvas id="lineChart2" width="400" height="300"></canvas>

<script>
  var context = document.getElementById("lineChart1").getContext("2d");
  var lineChart1 = new Chart(context, {
    type: "scatter",
    data: {
      labels: {{ Time | safe }},
      datasets: [
        {
          label: "{{ Title | safe }}",
          data: {{Parsed | safe}},
          fill: false,
          //borderColor: "rgb(75, 192, 192)",
          showLine:true,
          lineTension: 0.05
        }
      ],

    },
    options: {
      responsive: false,
      scales: {
         x:{type:'linear',
            position:'bottom',
            title:{display:true,text:'Time (hours)'}},
      }
      
    }
  });
  var context = document.getElementById("lineChart2").getContext("2d");
  var lineChart2 = new Chart(context, {
    type: "scatter",
    data: {
      labels: {{ Time2 | safe }},
      datasets: [
        {
          label: "{{ Title2 | safe }}",
          data: {{Parsed2 | safe}},
          fill: false,
          //borderColor: "rgb(75, 192, 192)",
          showLine:true,
          lineTension: 0.05
        }
      ],

    },
    options: {
      responsive: false,
      scales: {
         x:{type:'linear',
            position:'bottom',
            title:{display:true,text:'Time (hours)'}},
      }
      
    }
  });




var intervalID = setInterval(update_values,1000);
function update_values(){
    $.getJSON('/update',
    function(dataNew) {
         $('#Time').text(dataNew.Time);
         $('#Values').text(dataNew.Values);
         $('#Title').text(dataNew.Title);
         $('#Parsed').text(dataNew.Parsed);
         $('#Time2').text(dataNew.Time2);
         $('#Values2').text(dataNew.Values2);
         $('#Title2').text(dataNew.Title2);
         $('#Parsed2').text(dataNew.Parsed2);
         console.log(dataNew)
    lineChart1.data.datasets[0].data=dataNew.Parsed
    lineChart2.data.datasets[0].data=dataNew.Parsed2
         });
    lineChart1.update();
    lineChart2.update();
       }


</script>
{% endblock %}
